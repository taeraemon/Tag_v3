# 프로젝트 개요

이 프로젝트는 BLE(Bluetooth Low Energy)와 WiFi를 활용하여 디바이스 설정을 관리하고, 배터리 상태 모니터링 및 시간 동기화를 수행하는 시스템입니다. 사용자는 간단한 명령어 프로토콜을 통해 디바이스의 설정을 변경하거나, 배터리 상태를 확인할 수 있습니다. 또한, 디바이스는 EEPROM에 설정 값을 저장하여 재부팅 시에도 설정을 유지합니다.

## 주요 기능

1. **WiFi 관리**: WiFi 스캔을 활성화/비활성화하거나, SSID 설정을 변경할 수 있습니다.
2. **BLE 관리**: BLE를 통해 설정 값이나 배터리 상태를 모니터링할 수 있으며, 광고 주기 및 송신 전력을 설정할 수 있습니다.
3. **배터리 모니터링**: 배터리 전압을 주기적으로 측정하고 퍼센트로 변환하여 BLE를 통해 전송할 수 있습니다.
4. **시간 동기화**: 외부 명령을 통해 디바이스 시간을 설정할 수 있습니다.
5. **EEPROM 저장**: WiFi 및 BLE 설정 값을 EEPROM에 저장하여 재부팅 후에도 설정을 유지합니다.

## 명령어 프로토콜

### 명령어 형식

각 명령어는 아래 형식을 따릅니다:

- **Command Code**: 실행할 동작을 나타내는 단일 문자.
- **Data**: 해당 명령어에 필요한 추가 정보.

### 명령어 목록

| Command Code | 설명                             | 데이터 형식             | 예시                      |
|--------------|----------------------------------|-------------------------|---------------------------|
| `1`          | WiFi 스캔 활성화/비활성화          | `0` 또는 `1`            | `10` (스캔 비활성화), `11` (활성화) |
| `2`          | SSID 설정                        | 문자열(SSID)            | `2myNetworkSSID`           |
| `3`          | 광고 주기 및 송신 전력 설정         | `1` 또는 `2` + 값       | `311000` (광고 주기 설정), `3280` (송신 전력 설정) |
| `4`          | 배터리 모니터링 요청              | 없음                    | `4`                        |
| `5`          | 시간 설정                        | 시간 값(정수)            | `5123456789`               |
| `6`          | 디바이스 리셋                    | 없음                    | `6`                        |

### 명령어 세부 설명

#### `1` - WiFi 스캔 활성화/비활성화
WiFi 스캔을 활성화(`11`)하거나 비활성화(`10`)합니다.

#### `2` - SSID 설정
WiFi SSID를 설정합니다. 예시: `2myNetworkSSID`

#### `3` - 광고 주기 및 송신 전력 설정
- 광고 주기 설정: `311000` → 1000ms
- 송신 전력 설정: `3280` → 80

#### `4` - 배터리 모니터링 요청
배터리 상태를 요청합니다. 예시: `4`

#### `5` - 시간 설정
디바이스 시간을 설정합니다. 예시: `5123456789`

#### `6` - 디바이스 리셋
디바이스를 공장 초기 설정으로 리셋합니다. 예시: `6`

## 프로젝트 구성

- **BLE_manager**: BLE 초기화 및 광고 주기 설정, 송신 전력 관리.
- **WiFi_manager**: WiFi Access Point 모드 설정 및 SSID 관리.
- **Battery_monitor**: 배터리 전압을 측정하고 퍼센트로 변환하여 BLE로 전송.
- **RTC_manager**: 디바이스 시간을 관리하고 동기화.
- **Command_handler**: 명령어를 수신하고, 해당 명령에 맞는 동작을 수행.
- **EEPROM_manager**: 디바이스 설정을 EEPROM에 저장하고 불러오기.

## 설치 및 사용법

1. **초기 설정**: 프로젝트를 설정할 때, 각 매니저에서 필요한 초기값을 `DeviceConfig`로 설정합니다.
2. **명령어 전송**: 사용자는 BLE를 통해 명령어 프로토콜을 사용하여 디바이스 설정을 제어할 수 있습니다.
3. **설정 저장**: WiFi 설정, 광고 주기, 송신 전력 등의 값은 자동으로 EEPROM에 저장되며, 디바이스가 재부팅해도 설정이 유지됩니다.
4. **디바이스 리셋**: 리셋 명령어 (`6`)를 통해 디바이스를 공장 초기 상태로 복원할 수 있습니다.

## 주의사항

- 명령어 형식에 맞게 데이터를 입력해야 하며, 잘못된 형식이나 값은 예상치 못한 동작을 유발할 수 있습니다.
- 설정 값은 EEPROM에 저장되므로, 설정을 변경한 후 디바이스를 재부팅해도 값이 유지됩니다.
